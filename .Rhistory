library(tidyverse)
library(lubridate)
cases = read.csv("C:\\Users\\geier\\Documents\\Applied Stats\\data_557\\intermediate_data\\jhu_cases_01.26.2021.csv", check.names = FALSE)
deaths = read.csv("C:\\Users\\geier\\Documents\\Applied Stats\\data_557\\intermediate_data\\jhu_deaths_01.26.2021.csv", check.names = FALSE)
cases_country_date <- cases[7:376]
cases_pivot <- pivot_longer(cases_country_date, cols= !contains("country_code"), names_to = "Date", values_to = "Cases")
cases_pivot_grouped <- aggregate(cases_pivot$Cases, by = list(Category = cases_pivot$country_code, cases_pivot$Date), FUN=sum)
population = read.csv("C:\\Users\\geier\\Documents\\Applied Stats\\data_557\\intermediate_data\\world_bank_population.csv", check.names = FALSE)
deaths_country_date <- deaths[7:376]
deaths_pivot <- pivot_longer(deaths_country_date, cols= !contains("country_code"), names_to = "Date", values_to = "Deaths")
deaths_pivot_grouped <- aggregate(deaths_pivot$Deaths, by = list(Category = deaths_pivot$country_code, deaths_pivot$Date), FUN=sum)
cases_pivot_grouped <- cases_pivot_grouped %>%
rename(
country_code = Category,
Date = Group.2,
Cases = x
)
deaths_pivot_grouped <- deaths_pivot_grouped %>%
rename(
country_code = Category,
Date = Group.2,
Deaths = x
)
deaths_and_cases <- merge(cases_pivot_grouped, deaths_pivot_grouped, by = c("country_code"="country_code", "Date"="Date"))
nonzero_cases <- deaths_and_cases[deaths_and_cases$Cases >0, ]
nonzero_cases$clean_date <- as.Date(str_replace_all(nonzero_cases$Date, "X", ""), "%m.%d.%y")
nonzero_cases_sort <- nonzero_cases %>%
group_by(country_code) %>%
arrange(clean_date) %>%
mutate(day_since_first_case=row_number())
sum_cases <- function(df, num_days) {
return(df[df$day_since_first_case == num_days, ])
}
deaths_cases_population <- merge(deaths_and_cases, population, by = c("country_code"="country_code"))
deaths_cases_population
deaths_cases_population$casepc <- round(deaths_cases_population$Cases / deaths_cases_population$pop_2019, 2)
deaths_cases_population
deaths_cases_population$casepc <- deaths_cases_population$Cases / deaths_cases_population$pop_2019
deaths_cases_population
deaths_cases_population$casepc <- (deaths_cases_population$Cases / deaths_cases_population$pop_2019) * 1000
deaths_cases_population
deaths_cases_population$casepc <- (deaths_cases_population$Cases / deaths_cases_population$pop_2019) * 10000
deaths_cases_population
deaths_cases_population$casepc <- (deaths_cases_population$Cases / deaths_cases_population$pop_2019) * 1000
deaths_cases_population
deaths_cases_population$deathpc <- (deaths_cases_population$Deaths / deaths_cases_population$pop_2019) * 1000
deaths_cases_population
deaths_cases_population <- merge(nonzero_cases, population, by = c("country_code"="country_code"))
deaths_cases_population$casepc <- (deaths_cases_population$Cases / deaths_cases_population$pop_2019) * 1000
deaths_cases_population$deathpc <- (deaths_cases_population$Deaths / deaths_cases_population$pop_2019) * 1000
deaths_cases_population$cfratio <- (deaths_cases_population$Deaths / deaths_cases_population$Cases) * 100
deaths_cases_population
indicators <- read.csv("C:\\Users\\geier\\Documents\\Applied Stats\\data_557\\intermediate_data\\ghsi_summary.csv", check.names = FALSE)
deaths_cases_indicators <- merge(deaths_cases_population, indicators, by =c("country_code"="country_code"))
deaths_cases_indicators
View(deaths_cases_indicators)
View(deaths_cases_indicators)
sum_cases(deaths_cases_indicators, 10)
deaths_cases_population <- merge(nonzero_cases_sort, population, by = c("country_code"="country_code"))
deaths_cases_population$casepc <- (deaths_cases_population$Cases / deaths_cases_population$pop_2019) * 1000
deaths_cases_population$deathpc <- (deaths_cases_population$Deaths / deaths_cases_population$pop_2019) * 1000
deaths_cases_population$cfratio <- (deaths_cases_population$Deaths / deaths_cases_population$Cases) * 100
indicators <- read.csv("C:\\Users\\geier\\Documents\\Applied Stats\\data_557\\intermediate_data\\ghsi_summary.csv", check.names = FALSE)
deaths_cases_indicators <- merge(deaths_cases_population, indicators, by =c("country_code"="country_code"))
sum_cases(deaths_cases_indicators, 10)
test3 <- sum_cases(deaths_cases_indicators, 10)
View(test3)
View(test3)
cases = read.csv(".\\intermediate_data\\jhu_cases_01.26.2021.csv", check.names = FALSE)
cases = read.csv("*\\intermediate_data\\jhu_cases_01.26.2021.csv", check.names = FALSE)
cases = read.csv(".\\intermediate_data\\jhu_cases_01.26.2021.csv", check.names = FALSE)
cases = read.csv(".\/intermediate_data\/jhu_cases_01.26.2021.csv", check.names = FALSE)
cases = read.csv("./intermediate_data/jhu_cases_01.26.2021.csv", check.names = FALSE)
cases = read.csv("\\intermediate_data\\jhu_cases_01.26.2021.csv", check.names = FALSE)
setwd('C:\Users\geier\Documents\Applied Stats\data_557')
setwd('C:\\Users\\geier\\Documents\\Applied Stats\\data_557')
cases = read.csv("\\intermediate_data\\jhu_cases_01.26.2021.csv", check.names = FALSE)
cases = read.csv(".\\intermediate_data\\jhu_cases_01.26.2021.csv", check.names = FALSE)
